# WebCodec Transcoder

ブラウザ上で動作する高性能な動画トランスコーダーです。MediaBunnyライブラリを使用し、動画ファイルのフォーマット変換、コーデック変換、ビットレート調整を簡単に行えます。

## 特徴

### 🎬 対応フォーマット
- **入力**: MP4, MOV, WebM
- **出力**: MP4, WebM

### 🎨 モダンなUI
- レスポンシブデザイン
- ダークモード対応
- ドラッグ&ドロップでファイル選択
- リアルタイムプログレス表示

### ⚡ 主要機能

#### 動画変換
- **コーデック選択**
  - H.264 (AVC)
  - H.265 (HEVC) - 対応環境のみ
  - AV1
- **ビットレート調整**: 0.1Mbps〜2.0Mbps
- **パススルーモード**: 元のビットレートを維持

#### 音声変換
- **コーデック選択**
  - AAC
  - Opus
- **ビットレート調整**: 32kbps〜128kbps
- **音声のみ抽出**: 動画から音声だけを取り出す機能

#### その他
- **ファイルサイズ予測**: 変換前に概算サイズを表示
- **動画情報表示**: 元のコーデック、ビットレート、解像度などを確認
- **経過時間表示**: 変換中の経過時間をリアルタイム表示
- **変換中断**: 処理を途中で停止可能

## 使い方

### 1. ファイルを選択
- 「選択」ボタンをクリック、またはファイルをドラッグ&ドロップ

### 2. 変換設定
- **出力フォーマット**: MP4またはWebMを選択
- **音声のみ抽出**: トグルをONにすると動画設定が非表示になり、音声のみを抽出
- **動画設定**: コーデックとビットレートを選択
- **音声設定**: コーデックとビットレートを選択

### 3. 変換開始
- 「変換開始」ボタンをクリック
- 進捗バーで処理状況を確認
- 完了後、自動的にファイルがダウンロードされます

## 技術仕様

### 使用ライブラリ
- **MediaBunny**: 動画処理のコアライブラリ
- **Tailwind CSS**: スタイリング
- **Material Symbols**: アイコン
- **Space Grotesk**: フォント

### ブラウザ要件
- Chrome 94以降推奨
- Edge 94以降推奨
- Safari、Firefoxでは一部機能が制限される場合があります

### アーキテクチャ
```
index.html          # メインUI
├── js/
│   ├── ui.js       # UI制御とイベント処理
│   └── worker.js   # 動画処理ワーカー（MediaBunny使用）
```

## 開発情報

### ファイル構成
```
WebCodec/
├── index.html           # メインHTML
├── js/
│   ├── ui.js           # UIロジック
│   └── worker.js       # 変換処理
├── SPEC.md             # 仕様書
└── README.md           # このファイル
```

### 主要機能の実装

#### 音声のみ抽出
`ui.js`で`audio-only-toggle`の状態を監視し、ONの場合は`video-settings-section`を非表示にします。`worker.js`では`audioOnly`フラグを受け取り、MediaBunnyの入力処理で映像トラックをフィルタリングします。

#### ビットレート維持
スライダーを最大値に設定すると、元のビットレートを維持する「パススルーモード」になります。

#### ファイルサイズ予測
動画の長さ、選択したビットレート、コーデックの圧縮率から概算サイズを計算します。

## ライセンス

このプロジェクトはオープンソースです。

## 注意事項

- ブラウザ上で処理を行うため、大きなファイルの場合は時間がかかることがあります
- H.265エンコードは一部のブラウザでのみサポートされています
- ファイルはローカルで処理され、サーバーにアップロードされることはありません
